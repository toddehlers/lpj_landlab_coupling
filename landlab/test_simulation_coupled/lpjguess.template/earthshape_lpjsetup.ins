!///////////////////////////////////////////////////////////////////////////////////////
!// LPJ-GUESS INSTRUCTION SCRIPT FOR COHORT/INDIVIDUAL MODE
!//
!// LPJ-GUESS 4.0
!//
!///////////////////////////////////////////////////////////////////////////////////////


!///////////////////////////////////////////////////////////////////////////////////////
! Output files
!
! Prefined yearly output
! These files may be outcommented if their output is not required.

! new extra files
!file_sp_mwcont_deep "sp_mwcont_deep.out"
!file_vegcover "sp_vegcover.out"
!file_canopyheight "sp_canopy.out"
!file_mfpar "sp_mfpar.out"
!
!file_cmass "cmass.out"
!file_anpp "anpp.out"
!file_agpp "agpp.out"
!file_fpc "fpc.out"
!file_aaet "aaet.out"
!file_lai "lai.out"
!file_cflux "cflux.out"
!file_doc "doc.out"
!file_dens "dens.out"
!file_runoff "tot_runoff.out"
!file_cpool "cpool.out"
!file_clitter "clitter.out"
!file_firert "firert.out"
!file_speciesheights "height.out"
!
!file_nmass "nmass.out"
!file_cton_leaf "cton_leaf.out"
!file_ngases "ngases.out"
!file_nsources "nsources.out"
!file_npool "npool.out"
!file_nlitter "nlitter.out"
!file_nuptake "nuptake.out"
!file_nflux "nflux.out"
!file_vmaxnlim "vmaxnlim.out"
!
!! Monthly outputs
!file_mnpp "mnpp.out"
!file_mlai "mlai.out"
!file_mrh "mrh.out"
!file_mgpp "mgpp.out"
!file_mra "mra.out"
!file_mnee "mnee.out"
!file_maet "maet.out"
!file_mpet "mpet.out"
!file_mevap "mevap.out"
!file_mintercep "mintercep.out"
!file_mrunoff "mrunoff.out"
!file_mwcont_upper "mwcont_upper.out"
!file_mwcont_lower "mwcont_lower.out"
!file_miso "miso.out"
!file_mmon "mmon.out"


!///////// SUBPIXEL OUTPUT
file_sp_cmass "sp_cmass.out"
file_sp_anpp "sp_anpp.out"
file_sp_agpp "sp_agpp.out"
file_sp_fpc "sp_fpc.out"
file_sp_aaet "sp_aaet.out"
file_sp_lai "sp_lai.out"
file_sp_cflux "sp_cflux.out"
file_sp_doc "sp_doc.out"
file_sp_dens "sp_dens.out"
file_sp_runoff "sp_tot_runoff.out"
file_sp_cpool "sp_cpool.out"
file_sp_clitter "sp_clitter.out"
file_sp_firert "sp_firert.out"
!file_sp_aiso "sp_aiso.out"
!file_sp_amon "sp_amon.out"
file_sp_speciesheights "sp_height.out"

file_climate "climate.out"

file_sp_nmass "sp_nmass.out"
file_sp_cton_leaf "sp_cton_leaf.out"
file_sp_ngases "sp_ngases.out"
file_sp_nsources "sp_nsources.out"
file_sp_npool "sp_npool.out"
file_sp_nlitter "sp_nlitter.out"
file_sp_nuptake "sp_nuptake.out"
file_sp_nflux "sp_nflux.out"
file_sp_vmaxnlim "sp_vmaxnlim.out"

! Monthly outputs
file_sp_mnpp "sp_mnpp.out"
file_sp_mlai "sp_mlai.out"
file_sp_mrh "sp_mrh.out"
file_sp_mgpp "sp_mgpp.out"
file_sp_mra "sp_mra.out"
file_sp_mnee "sp_mnee.out"
file_sp_maet "sp_maet.out"
file_sp_mpet "sp_mpet.out"
file_sp_mevap "sp_mevap.out"
file_sp_mintercep "sp_mintercep.out"
file_sp_mrunoff "sp_mrunoff.out"
file_sp_mwcont_upper "sp_mwcont_upper.out"
file_sp_mwcont_lower "sp_mwcont_lower.out"
file_sp_mwcont_deep  "sp_mwcont_deep.out"
file_sp_mfpc "sp_mfpc.out"
file_sp_mtemp "sp_mtemp.out"
file_sp_mrad "sp_mrad.out"
file_sp_mprec "sp_mprec.out"
file_sp_mgdd5 "sp_mgdd5.out"
file_sp_mndepo "sp_mndepo.out"
!///////////////////////////////////////////////////////////////////////////////////////


!///////////////////////////////////////////////////////////////////////////////////////
!// RUN PARAMETERS AND OPTIONS
!

! Settings recognised by Plib
! Run GUESS with -help option for list of keywords and their meanings

title 'LPJ-GUESS cohort mode'

vegmode "cohort"		! "cohort", "individual" or "population"
ifcalcsla 1				! whether to calculate SLA from leaf longevity
						! (PFT-specific value can be specified in this file instead)
ifcalccton 1			! whether to calculate leaf C:N min from leaf longevity
						! (PFT-specific value can be specified in this file instead)
iffire 1				! whether to implement fire (1) or not (0)
npatch 5			! number of replicate patches to simulate
patcharea 1000			! patch area (m2)
estinterval 5			! years between establishment events in cohort mode
ifdisturb 1				! whether generic patch-destroying disturbances enabled
distinterval 100		! average return time for generic patch-destroying disturbances
						! Hickler et al. (2011) used 200
ifbgestab 1				! whether background establishment enabled
ifsme 1					! whether spatial mass effect enabled
ifstochestab 1			! whether establishment stochastic
ifstochmort 1			! whether mortality stochastic
ifcdebt 1				! whether to allow vegetation C storage (1) or not (0)
wateruptake "speciesspecific"  ! "wcont", "rootdist", "smart" or "speciesspecific",
                        ! see documentation for water_uptake()
textured_soil 1	     	! whether to use silt/sand fractions specific to soiltype
run_landcover 0         ! whether to use (and change) landcover fractions (1) or not (0)
ifsmoothgreffmort 1			! whether to vary mort_greff smoothly with growth efficiency (1)
							! or to use the standard step-function (0)
							! greff_min values below calibrated for the smooth (1) option
ifdroughtlimitedestab 0		! whether establishment is limited by growing season drought
							! guess2008 - species version has 1
ifrainonwetdaysonly 1		! cw whether to rain on wet days only (1), or to rain a bit every day (0)
ifbvoc 0                    ! whether to include BVOC calculations (1) or not (0)


!///////////////////////////////////////////////////////////////////////////////
! PROCESS SETTINGS SPECIFIC TO NITROGEN
!///////////////////////////////////////////////////////////////////////////////

ifcentury 1				! whether to use CENTURY SOM dynamics (mandatory for N cycling)
ifnlim 0				! whether plant growth limited by available N
freenyears 100			! number of years to spin up without N limitation (needed to build up a N pool)
nfix_a 0.102			! first term in N fixation eqn (Conservative 0.102, Central 0.234, Upper 0.367)
nfix_b 0.524			! second term in N fixation eqn (Conservative 0.524, Central -0.172, Upper -0.754)

!///////////////////////////////////////////////////////////////////////////////
! NEW PARAMETERS (FORMELY DEFINED INTERNALLY)
!///////////////////////////////////////////////////////////////////////////////

ifuniversalsla 1        ! use the universal sla calulation from Raich et al. 1992
ifdeepwater 1           ! use deep water reservoir for flats and valleys
ifnfixdaily 1           ! improve daily nfix calculation
BASEFLOW_FRAC 0.5       ! default 0.5, reduces drainage runoff

!///////////////////////////////////////////////////////////////////////////////
! LANDFORM MODE
run_landform 1
spoutput_startyear 0
sp_modifysoildepth 1    ! modify soil depth based on topographic position
!///////////////////////////////////////////////////////////////////////////////

